module.exports=function(C){C=C||require("opal-npm-wrapper").Opal;(function(a){function C(c,a){return"number"===typeof c&&"number"===typeof a?c+a:c["$+"](a)}function D(c,a){return"number"===typeof c&&"number"===typeof a?c<a:c["$<"](a)}function H(c,a){return"number"===typeof c&&"number"===typeof a?c-a:c["$-"](a)}a.dynamic_require_severity="ignore";var c=a.nil,I=a.breaker,L=a.slice,r=a.module,p=a.klass,w=a.hash2,J=a.range,M=a.hash;a.add_stubs("$[]= $config $nil_or_empty? $name $grep $constants $include $const_get $extend $attr_reader $merge $class $update $raise $new $create_block $is_a? $has_more_lines? $next_block $<< $each $define_method $send $insert $dup $call $attr_accessor $[] $option $=== $to_set $flatten $resolve_regexp $== $attr $method $register $arity $instance_exec $to_proc $activate $+ $values $groups $add_document_processor $! $find $select $add_syntax_processor $to_sym $include? $private $tr $to_s $join $map $upcase $chr $split $instance_variable_get $instance_variable_set $resolve_args $freeze $process_block_given? $source_location $class_for_name $< $update_config $unshift $as_symbol $name= $pop $size $> $- $fill $-@ $next_auto_id $generate_name $length $empty? $const_defined?".split(" "));
return function(K){(function(B){B=r(B,"Extensions");var f=B.$$scope;(function(e,$super){function d(){}var b=d=p(e,$super,"Processor",d),g=b.$$scope,z,q,m;b.$$proto.config=c;(function(b){a.defn(b,"$config",function(){var a;null==this.config&&(this.config=c);return!1!==(a=this.config)&&a!==c?a:this.config=w([],{})});a.defn(b,"$option",function(a,c){return this.$config()["$[]="](a,c)});a.defn(b,"$use_dsl",function(){var a;return(a=this.$name()["$nil_or_empty?"]())===c||a.$$is_boolean&&1!=a?(a=this.$constants().$grep("DSL"))===
c||a.$$is_boolean&&1!=a?c:this.$extend(this.$const_get("DSL")):(a=this.$constants().$grep("DSL"))===c||a.$$is_boolean&&1!=a?c:this.$include(this.$const_get("DSL"))});a.alias(b,"extend_dsl","use_dsl");return a.alias(b,"include_dsl","use_dsl")})(a.get_singleton_class(b));b.$attr_reader("config");a.defn(b,"$initialize",function(a){null==a&&(a=w([],{}));return this.config=this.$class().$config().$merge(a)});a.defn(b,"$update_config",function(a){return this.config.$update(a)});a.defn(b,"$process",function(){var c=
arguments.length-0;0>c&&(c=0);for(var b=Array(c),g=0;g<c;g++)b[g]=arguments[g+0];return this.$raise(a.get("NotImplementedError"))});a.defn(b,"$create_block",function(a,c,b,e,d){null==d&&(d=w([],{}));return g.get("Block").$new(a,c,w(["source","attributes"],{source:b,attributes:e}).$merge(d))});a.defn(b,"$create_image_block",function(a,b,g){null==g&&(g=w([],{}));return this.$create_block(a,"image",c,b,g)});a.defn(b,"$create_inline",function(a,c,b,e){null==e&&(e=w([],{}));return g.get("Inline").$new(a,
c,b,e)});a.defn(b,"$parse_content",function(a,b,e){var d,z,q=c,m=c;null==e&&(e=w([],{}));for(q=(d=b["$is_a?"](g.get("Reader")))===c||d.$$is_boolean&&1!=d?g.get("Reader").$new(b):b;(z=q["$has_more_lines?"]())!==c&&(!z.$$is_boolean||1==z);)if(m=g.get("Parser").$next_block(q,a,e),!1!==m&&m!==c)a["$<<"](m);return c});return(z=(q=[["create_paragraph","create_block","paragraph"],["create_open_block","create_block","open"],["create_example_block","create_block","example"],["create_pass_block","create_block",
"pass"],["create_listing_block","create_block","listing"],["create_literal_block","create_block","literal"],["create_anchor","create_inline","anchor"]]).$each,z.$$p=(m=function(b,g,e){var d=m.$$s||this,z,q;null==b&&(b=c);null==g&&(g=c);null==e&&(e=c);return(z=d.$define_method,z.$$p=(q=function(c){var b=q.$$s||this,d;c=L.call(arguments,0);return(d=b).$send.apply(d,[g].concat(a.to_a(c.$dup().$insert(1,e))))},q.$$s=d,q),z).call(d,b)},m.$$s=b,m),z).call(q)})(f.base,null);(function(e){e=r(e,"ProcessorDsl");
var f;a.defn(e,"$option",function(a,c){return this.$config()["$[]="](a,c)});a.defn(e,"$process",f=function(){var e,b=f.$$p||c;null==this.process_block&&(this.process_block=c);var g=arguments.length-0;0>g&&(g=0);for(var z=Array(g),q=0;q<g;q++)z[q]=arguments[q+0];f.$$p=null;return b!==c?this.process_block=b:(e=this.process_block)===c||e.$$is_boolean&&1!=e?this.$raise(a.get("NotImplementedError")):(e=this.process_block).$call.apply(e,a.to_a(z))});a.defn(e,"$process_block_given?",function(){var a;return(a=
this.process_block,null!=a&&a!==c)?"instance-variable":c})})(f.base);(function(e,$super){function d(){}var b=d=p(e,$super,"Preprocessor",d);return(a.defn(b,"$process",function(c,b){return this.$raise(a.get("NotImplementedError"))}),c)&&"process"})(f.base,f.get("Processor"));a.casgn(f.get("Preprocessor"),"DSL",f.get("ProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"Treeprocessor",d);return(a.defn(b,"$process",function(c){return this.$raise(a.get("NotImplementedError"))}),c)&&"process"})(f.base,
f.get("Processor"));a.casgn(f.get("Treeprocessor"),"DSL",f.get("ProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"Postprocessor",d);return(a.defn(b,"$process",function(c,b){return this.$raise(a.get("NotImplementedError"))}),c)&&"process"})(f.base,f.get("Processor"));a.casgn(f.get("Postprocessor"),"DSL",f.get("ProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"IncludeProcessor",d);a.defn(b,"$process",function(c,b,e,d){return this.$raise(a.get("NotImplementedError"))});
return(a.defn(b,"$handles?",function(a){return!0}),c)&&"handles?"})(f.base,f.get("Processor"));a.casgn(f.get("IncludeProcessor"),"DSL",f.get("ProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"DocinfoProcessor",d),g;b.$$proto.config=c;b.$attr_accessor("location");a.defn(b,"$initialize",g=function(b){var e,d;null==b&&(b=w([],{}));g.$$p=null;a.find_super_dispatcher(this,"initialize",g,null).apply(this,[b]);return e=this.config,!1!==(d=e["$[]"]("location"))&&d!==c?d:e["$[]="]("location",
"head")});return(a.defn(b,"$process",function(c){return this.$raise(a.get("NotImplementedError"))}),c)&&"process"})(f.base,f.get("Processor"));(function(c){c=r(c,"DocinfoProcessorDsl");c.$include(c.$$scope.get("ProcessorDsl"));a.defn(c,"$at_location",function(a){return this.$option("location",a)})})(f.base);a.casgn(f.get("DocinfoProcessor"),"DSL",f.get("DocinfoProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"BlockProcessor",d),g;b.$$proto.config=c;b.$attr_accessor("name");a.defn(b,
"$initialize",g=function(b,e){var d,f,h,p=c;null==b&&(b=c);null==e&&(e=w([],{}));g.$$p=null;a.find_super_dispatcher(this,"initialize",g,null).apply(this,[e]);this.name=!1!==(d=b)&&d!==c?d:this.config["$[]"]("name");p=this.config["$[]"]("contexts");if(a.get("NilClass")["$==="](p))d="contexts",f=this.config,!1!==(h=f["$[]"](d))&&h!==c?h:f["$[]="](d,["open","paragraph"].$to_set());else if(a.get("Symbol")["$==="](p))this.config["$[]="]("contexts",[this.config["$[]"]("contexts")].$to_set());else this.config["$[]="]("contexts",
this.config["$[]"]("contexts").$to_set());return d="content_model",f=this.config,!1!==(h=f["$[]"](d))&&h!==c?h:f["$[]="](d,"compound")});return(a.defn(b,"$process",function(c,b,e){return this.$raise(a.get("NotImplementedError"))}),c)&&"process"})(f.base,f.get("Processor"));(function(e){e=r(e,"BlockProcessorDsl");var f=e.$$scope;e.$include(f.get("ProcessorDsl"));a.defn(e,"$named",function(a){var b;return(b=this["$is_a?"](f.get("Processor")))===c||b.$$is_boolean&&1!=b?this.$option("name",a):this.name=
a});a.alias(e,"match_name","named");a.alias(e,"bind_to","named");a.defn(e,"$contexts",function(){var a=arguments.length-0;0>a&&(a=0);for(var c=Array(a),e=0;e<a;e++)c[e]=arguments[e+0];return this.$option("contexts",c.$flatten())});a.alias(e,"on_contexts","contexts");a.alias(e,"on_context","contexts");a.defn(e,"$content_model",function(a){return this.$option("content_model",a)});a.alias(e,"parse_content_as","content_model");a.defn(e,"$positional_attributes",function(){var a=arguments.length-0;0>a&&
(a=0);for(var c=Array(a),e=0;e<a;e++)c[e]=arguments[e+0];return this.$option("pos_attrs",c.$flatten())});a.alias(e,"pos_attrs","positional_attributes");a.alias(e,"name_attributes","positional_attributes");a.alias(e,"name_positional_attributes","positional_attributes");a.defn(e,"$default_attrs",function(a){return this.$option("default_attrs",a)});a.alias(e,"seed_attributes_with","default_attrs")})(f.base);a.casgn(f.get("BlockProcessor"),"DSL",f.get("BlockProcessorDsl"));(function(e,$super){function d(){}
var b=d=p(e,$super,"MacroProcessor",d),g;b.$$proto.config=c;b.$attr_accessor("name");a.defn(b,"$initialize",g=function(b,e){var d,f,h;null==b&&(b=c);null==e&&(e=w([],{}));g.$$p=null;a.find_super_dispatcher(this,"initialize",g,null).apply(this,[e]);this.name=!1!==(d=b)&&d!==c?d:this.config["$[]"]("name");return d="content_model",f=this.config,!1!==(h=f["$[]"](d))&&h!==c?h:f["$[]="](d,"attributes")});return(a.defn(b,"$process",function(c,b,e){return this.$raise(a.get("NotImplementedError"))}),c)&&"process"})(f.base,
f.get("Processor"));(function(e){e=r(e,"MacroProcessorDsl");var f=e.$$scope;e.$include(f.get("ProcessorDsl"));a.defn(e,"$named",function(a){var b;return(b=this["$is_a?"](f.get("Processor")))===c||b.$$is_boolean&&1!=b?this.$option("name",a):this.name=a});a.alias(e,"match_name","named");a.alias(e,"bind_to","named");a.defn(e,"$content_model",function(a){return this.$option("content_model",a)});a.alias(e,"parse_content_as","content_model");a.defn(e,"$positional_attributes",function(){var a=arguments.length-
0;0>a&&(a=0);for(var c=Array(a),e=0;e<a;e++)c[e]=arguments[e+0];return this.$option("pos_attrs",c.$flatten())});a.alias(e,"pos_attrs","positional_attributes");a.alias(e,"name_attributes","positional_attributes");a.alias(e,"name_positional_attributes","positional_attributes");a.defn(e,"$default_attrs",function(a){return this.$option("default_attrs",a)});a.alias(e,"seed_attributes_with","default_attrs")})(f.base);(function(a,$super){function d(){}d=p(a,$super,"BlockMacroProcessor",d);return c})(f.base,
f.get("MacroProcessor"));a.casgn(f.get("BlockMacroProcessor"),"DSL",f.get("MacroProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"InlineMacroProcessor",d),g=b.$$proto;g.config=g.name=c;a.defn(b,"$regexp",function(){var a,b;return a=this.config,!1!==(b=a["$[]"]("regexp"))&&b!==c?b:a["$[]="]("regexp",this.$resolve_regexp(this.name,this.config["$[]"]("format")))});return(a.defn(b,"$resolve_regexp",function(a,c){return c["$=="]("short")?new RegExp("\\\\?"+a+":\\[((?:\\\\\\]|[^\\]])*?)\\]"):
new RegExp("\\\\?"+a+":(\\S+?)\\[((?:\\\\\\]|[^\\]])*?)\\]")}),c)&&"resolve_regexp"})(f.base,f.get("MacroProcessor"));(function(c){c=r(c,"InlineMacroProcessorDsl");c.$include(c.$$scope.get("MacroProcessorDsl"));a.defn(c,"$using_format",function(a){return this.$option("format",a)});a.defn(c,"$match",function(a){return this.$option("regexp",a)})})(f.base);a.casgn(f.get("InlineMacroProcessor"),"DSL",f.get("InlineMacroProcessorDsl"));(function(e,$super){function d(){}var b=d=p(e,$super,"Extension",d);
b.$attr("kind");b.$attr("config");b.$attr("instance");return(a.defn(b,"$initialize",function(a,c,b){this.kind=a;this.instance=c;return this.config=b}),c)&&"initialize"})(f.base,null);(function(e,$super){function d(){}var b=d=p(e,$super,"ProcessorExtension",d),g;b.$attr("process_method");return(a.defn(b,"$initialize",g=function(b,e,d){var f;null==d&&(d=c);g.$$p=null;a.find_super_dispatcher(this,"initialize",g,null).apply(this,[b,e,e.$config()]);return this.process_method=!1!==(f=d)&&f!==c?f:e.$method("process")}),
c)&&"initialize"})(f.base,f.get("Extension"));(function(e,$super){function d(){}var b=d=p(e,$super,"Group",d);(function(b){var e=b.$$scope;return(a.defn(b,"$register",function(a){null==a&&(a=c);return e.get("Extensions").$register(a,this)}),c)&&"register"})(a.get_singleton_class(b));return(a.defn(b,"$activate",function(c){return this.$raise(a.get("NotImplementedError"))}),c)&&"activate"})(f.base,null);(function(e,$super){function d(){}var b=d=p(e,$super,"Registry",d),g=b.$$proto,f=b.$$scope,q,m,k,
h,r,A,B,E,F,G;g.groups=g.preprocessor_extensions=g.treeprocessor_extensions=g.postprocessor_extensions=g.include_processor_extensions=g.docinfo_processor_extensions=g.block_extensions=g.block_macro_extensions=g.inline_macro_extensions=c;b.$attr_reader("document");b.$attr_reader("groups");a.defn(b,"$initialize",function(a){null==a&&(a=w([],{}));this.groups=a;return this.document=this.block_extensions=this.block_macro_extensions=this.inline_macro_extensions=this.preprocessor_extensions=this.treeprocessor_extensions=
this.postprocessor_extensions=this.include_processor_extensions=this.docinfo_processor_extensions=c});a.defn(b,"$activate",function(b){var e,l,d;this.document=b;(e=(l=C(f.get("Extensions").$groups().$values(),this.groups.$values())).$each,e.$$p=(d=function(b){var l=d.$$s||this,e,g=c;null==b&&(b=c);g=b;a.get("Proc")["$==="](g)?(g=b.$arity(),b=0["$==="](g)||-1["$==="](g)?(e=l.$instance_exec,e.$$p=b.$to_proc(),e).call(l):1["$==="](g)?b.$call(l):c):b=a.get("Class")["$==="](g)?b.$new().$activate(l):b.$activate(l);
return b},d.$$s=this,d),e).call(l);return this});a.defn(b,"$preprocessor",q=function(){var a,b=q.$$p||c,l=arguments.length-0;0>l&&(l=0);for(var e=Array(l),d=0;d<l;d++)e[d]=arguments[d+0];q.$$p=null;return(a=this.$add_document_processor,a.$$p=b.$to_proc(),a).call(this,"preprocessor",e)});a.defn(b,"$preprocessors?",function(){return this.preprocessor_extensions["$!"]()["$!"]()});a.defn(b,"$preprocessors",function(){return this.preprocessor_extensions});a.defn(b,"$treeprocessor",m=function(){var a,b=
m.$$p||c,l=arguments.length-0;0>l&&(l=0);for(var e=Array(l),d=0;d<l;d++)e[d]=arguments[d+0];m.$$p=null;return(a=this.$add_document_processor,a.$$p=b.$to_proc(),a).call(this,"treeprocessor",e)});a.defn(b,"$treeprocessors?",function(){return this.treeprocessor_extensions["$!"]()["$!"]()});a.defn(b,"$treeprocessors",function(){return this.treeprocessor_extensions});a.defn(b,"$postprocessor",k=function(){var a,b=k.$$p||c,l=arguments.length-0;0>l&&(l=0);for(var e=Array(l),d=0;d<l;d++)e[d]=arguments[d+
0];k.$$p=null;return(a=this.$add_document_processor,a.$$p=b.$to_proc(),a).call(this,"postprocessor",e)});a.defn(b,"$postprocessors?",function(){return this.postprocessor_extensions["$!"]()["$!"]()});a.defn(b,"$postprocessors",function(){return this.postprocessor_extensions});a.defn(b,"$include_processor",h=function(){var a,b=h.$$p||c,l=arguments.length-0;0>l&&(l=0);for(var e=Array(l),d=0;d<l;d++)e[d]=arguments[d+0];h.$$p=null;return(a=this.$add_document_processor,a.$$p=b.$to_proc(),a).call(this,"include_processor",
e)});a.defn(b,"$include_processors?",function(){return this.include_processor_extensions["$!"]()["$!"]()});a.defn(b,"$include_processors",function(){return this.include_processor_extensions});a.defn(b,"$docinfo_processor",r=function(){var a,b=r.$$p||c,l=arguments.length-0;0>l&&(l=0);for(var e=Array(l),d=0;d<l;d++)e[d]=arguments[d+0];r.$$p=null;return(a=this.$add_document_processor,a.$$p=b.$to_proc(),a).call(this,"docinfo_processor",e)});a.defn(b,"$docinfo_processors?",function(a){var b,l,e;null==
a&&(a=c);return(b=this.docinfo_processor_extensions)===c||b.$$is_boolean&&1!=b?!1:!1!==a&&a!==c?(b=(l=this.docinfo_processor_extensions).$find,b.$$p=(e=function(b){null==b&&(b=c);return b.$config()["$[]"]("location")["$=="](a)},e.$$s=this,e),b).call(l):!0});a.defn(b,"$docinfo_processors",function(a){var b,e,d;null==a&&(a=c);return(b=this.docinfo_processor_extensions)===c||b.$$is_boolean&&1!=b?c:!1!==a&&a!==c?(b=(e=this.docinfo_processor_extensions).$select,b.$$p=(d=function(b){null==b&&(b=c);return b.$config()["$[]"]("location")["$=="](a)},
d.$$s=this,d),b).call(e):this.docinfo_processor_extensions});a.defn(b,"$block",A=function(){var a,b=A.$$p||c,e=arguments.length-0;0>e&&(e=0);for(var d=Array(e),g=0;g<e;g++)d[g]=arguments[g+0];A.$$p=null;return(a=this.$add_syntax_processor,a.$$p=b.$to_proc(),a).call(this,"block",d)});a.defn(b,"$blocks?",function(){return this.block_extensions["$!"]()["$!"]()});a.defn(b,"$registered_for_block?",function(a,b){var e,d=c;return(e=d=this.block_extensions["$[]"](a.$to_sym()))===c||e.$$is_boolean&&1!=e?!1:
(e=d.$config()["$[]"]("contexts")["$include?"](b))===c||e.$$is_boolean&&1!=e?!1:d});a.defn(b,"$find_block_extension",function(a){return this.block_extensions["$[]"](a.$to_sym())});a.defn(b,"$block_macro",B=function(){var a,b=B.$$p||c,e=arguments.length-0;0>e&&(e=0);for(var d=Array(e),g=0;g<e;g++)d[g]=arguments[g+0];B.$$p=null;return(a=this.$add_syntax_processor,a.$$p=b.$to_proc(),a).call(this,"block_macro",d)});a.defn(b,"$block_macros?",function(){return this.block_macro_extensions["$!"]()["$!"]()});
a.defn(b,"$registered_for_block_macro?",function(a){var b,e=c;return(b=e=this.block_macro_extensions["$[]"](a.$to_sym()))===c||b.$$is_boolean&&1!=b?!1:e});a.defn(b,"$find_block_macro_extension",function(a){return this.block_macro_extensions["$[]"](a.$to_sym())});a.defn(b,"$inline_macro",E=function(){var a,b=E.$$p||c,e=arguments.length-0;0>e&&(e=0);for(var d=Array(e),g=0;g<e;g++)d[g]=arguments[g+0];E.$$p=null;return(a=this.$add_syntax_processor,a.$$p=b.$to_proc(),a).call(this,"inline_macro",d)});a.defn(b,
"$inline_macros?",function(){return this.inline_macro_extensions["$!"]()["$!"]()});a.defn(b,"$registered_for_inline_macro?",function(a){var b,e=c;return(b=e=this.inline_macro_extensions["$[]"](a.$to_sym()))===c||b.$$is_boolean&&1!=b?!1:e});a.defn(b,"$find_inline_macro_extension",function(a){return this.inline_macro_extensions["$[]"](a.$to_sym())});a.defn(b,"$inline_macros",function(){return this.inline_macro_extensions.$values()});b.$private();a.defn(b,"$add_document_processor",F=function(b,e){var d,
g,q,m,h,p,k=this,w=F.$$p||c,u=c,x=c,y=c,t=c,r=x=c,n=c,v=c,A=c;F.$$p=null;u=b.$to_s().$tr("_"," ");x=(d=(g=u.$split(" ")).$map,d.$$p=(q=function(a){null==a&&(a=c);return""+a.$chr().$upcase()+a["$[]"](J(1,-1,!1))},q.$$s=k,q),d).call(g).$join().$to_sym();y=f.get("Extensions").$const_get(x);t=(d=null==a.Object.$$scope.AsciidoctorJ?c:"constant")===c||d.$$is_boolean&&1!=d?c:a.get("AsciidoctorJ").$$scope.get("Extensions").$const_get(x);x=!1!==(d=k.$instance_variable_get(("@"+b+"_extensions").$to_sym()))&&
d!==c?d:k.$instance_variable_set(("@"+b+"_extensions").$to_sym(),[]);r=function(){if(w!==c)return n=k.$resolve_args(e,1),v=y.$new(n),(d=y.$constants().$grep("DSL"))===c||d.$$is_boolean&&1!=d||v.$extend(y.$const_get("DSL")),(d=(m=v).$instance_exec,d.$$p=w.$to_proc(),d).call(m),v.$freeze(),((d=v["$process_block_given?"]())===c||d.$$is_boolean&&1!=d)&&k.$raise(a.get("ArgumentError").$new("No block specified to process "+u+" extension at "+w.$source_location())),f.get("ProcessorExtension").$new(b,v);
d=a.to_ary(k.$resolve_args(e,2));v=null==d[0]?c:d[0];n=null==d[1]?c:d[1];if((d=!1!==(h=v["$is_a?"](a.get("Class")))&&h!==c?h:(p=v["$is_a?"](a.get("String")),!1!==p&&p!==c?v=f.get("Extensions").$class_for_name(v):p))===c||d.$$is_boolean&&1!=d){if((d=!1!==(h=v["$is_a?"](y))&&h!==c?h:(p=!1!==t&&t!==c)?v["$is_a?"](t):t)===c||d.$$is_boolean&&1!=d)return k.$raise(a.get("ArgumentError").$new("Invalid arguments specified for registering "+u+" extension: "+e));v.$update_config(n);v.$freeze();return f.get("ProcessorExtension").$new(b,
v)}((d=!1!==(h=D(v,y))&&h!==c?h:(p=!1!==t&&t!==c)?D(v,t):t)===c||d.$$is_boolean&&1!=d)&&k.$raise(a.get("ArgumentError").$new("Invalid type for "+u+" extension: "+v));A=v.$new(n);A.$freeze();return f.get("ProcessorExtension").$new(b,A)}();return r.$config()["$[]"]("position")["$=="](">>")?x.$unshift(r):x["$<<"](r)});a.defn(b,"$add_syntax_processor",G=function(b,e){var d,g,q,m,h,k,p=G.$$p||c,r=c,u=c,x=c,y=u=c,t=x=c,A=c,n=c,u=c;G.$$p=null;r=b.$to_s().$tr("_"," ");u=(d=(g=r.$split(" ")).$map,d.$$p=(q=
function(a){null==a&&(a=c);return""+a.$chr().$upcase()+a["$[]"](J(1,-1,!1))},q.$$s=this,q),d).call(g).$join();x=(""+u+"Processor").$to_sym();u=f.get("Extensions").$const_get(x);y=(d=null==a.Object.$$scope.AsciidoctorJ?c:"constant")===c||d.$$is_boolean&&1!=d?c:a.get("AsciidoctorJ").$$scope.get("Extensions").$const_get(x);x=!1!==(d=this.$instance_variable_get(("@"+b+"_extensions").$to_sym()))&&d!==c?d:this.$instance_variable_set(("@"+b+"_extensions").$to_sym(),w([],{}));if(p!==c){d=a.to_ary(this.$resolve_args(e,
2));t=null==d[0]?c:d[0];A=null==d[1]?c:d[1];n=u.$new(this.$as_symbol(t),A);(d=u.$constants().$grep("DSL"))===c||d.$$is_boolean&&1!=d||n.$extend(u.$const_get("DSL"));if(p.$arity()["$=="](1)){if(a.yield1(p,n)===I)return I.$v}else(d=(m=n).$instance_exec,d.$$p=p.$to_proc(),d).call(m);((d=t=this.$as_symbol(n.$name()))===c||d.$$is_boolean&&1!=d)&&this.$raise(a.get("ArgumentError").$new("No name specified for "+r+" extension at "+p.$source_location()));((d=n["$process_block_given?"]())===c||d.$$is_boolean&&
1!=d)&&this.$raise(a.get("NoMethodError").$new("No block specified to process "+r+" extension at "+p.$source_location()));n.$freeze();return x["$[]="](t,f.get("ProcessorExtension").$new(b,n))}d=a.to_ary(this.$resolve_args(e,3));n=null==d[0]?c:d[0];t=null==d[1]?c:d[1];A=null==d[2]?c:d[2];if((d=!1!==(h=n["$is_a?"](a.get("Class")))&&h!==c?h:(k=n["$is_a?"](a.get("String")),!1!==k&&k!==c?n=f.get("Extensions").$class_for_name(n):k))===c||d.$$is_boolean&&1!=d){if((d=!1!==(h=n["$is_a?"](u))&&h!==c?h:(k=!1!==
y&&y!==c)?n["$is_a?"](y):y)===c||d.$$is_boolean&&1!=d)return this.$raise(a.get("ArgumentError").$new("Invalid arguments specified for registering "+r+" extension: "+e));n.$update_config(A);((d=t=!1!==t&&t!==c?(h=[this.$as_symbol(t)],k=n,k["$name="].apply(k,h),h[h.length-1]):this.$as_symbol(n.$name()))===c||d.$$is_boolean&&1!=d)&&this.$raise(a.get("ArgumentError").$new("No name specified for "+r+" extension: "+n));n.$freeze();return x["$[]="](t,f.get("ProcessorExtension").$new(b,n))}((d=!1!==(h=D(n,
u))&&h!==c?h:(k=!1!==y&&y!==c)?D(n,y):y)===c||d.$$is_boolean&&1!=d)&&this.$raise(a.get("ArgumentError").$new("Class specified for "+r+" extension does not inherit from "+u+": "+n));u=n.$new(this.$as_symbol(t),A);((d=t=this.$as_symbol(u.$name()))===c||d.$$is_boolean&&1!=d)&&this.$raise(a.get("ArgumentError").$new("No name specified for "+r+" extension: "+n));n.$freeze();return x["$[]="](t,f.get("ProcessorExtension").$new(b,u))});a.defn(b,"$resolve_args",function(b,d){var e,g=c,f=c,h=c,g=(e=b["$[]"](-1)["$is_a?"](a.get("Hash")))===
c||e.$$is_boolean&&1!=e?w([],{}):b.$pop();if(d["$=="](1))return g;f=b.$size();e=h=H(H(d,1),f);("number"===typeof e?0<e:e["$>"](0))?b.$fill(c,f,h):D(h,0)&&b.$pop(h["$-@"]());b["$<<"](g);return b});return(a.defn(b,"$as_symbol",function(b){var d;return!1!==b&&b!==c?(d=b["$is_a?"](a.get("Symbol")))===c||d.$$is_boolean&&1!=d?b.$to_sym():b:c}),c)&&"as_symbol"})(f.base,null);(function(e){var f=e.$$scope,d,b;a.defn(e,"$generate_name",function(){return"extgrp"+this.$next_auto_id()});a.defn(e,"$next_auto_id",
function(){var a;null==this.auto_id&&(this.auto_id=c);!1!==(a=this.auto_id)&&a!==c?a:this.auto_id=-1;return this.auto_id=C(this.auto_id,1)});a.defn(e,"$groups",function(){var a;null==this.groups&&(this.groups=c);return!1!==(a=this.groups)&&a!==c?a:this.groups=w([],{})});a.defn(e,"$build_registry",d=function(a){var b,e=d.$$p||c;null==a&&(a=c);d.$$p=null;return e!==c?(!1!==(b=a)&&b!==c?b:a=this.$generate_name(),f.get("Registry").$new(M(a,e))):f.get("Registry").$new()});a.defn(e,"$register",b=function(){var d,
e=b.$$p||c,f=c,m=c,k=m=c,k=c,f=arguments.length-0;0>f&&(f=0);for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+0];b.$$p=null;f=h.$length();e===c&&((d=(m=h.$pop())["$!"]())===c||d.$$is_boolean&&1!=d?(k=m,e=a.get("Class")["$==="](k)?m:a.get("String")["$==="](k)?this.$class_for_name(m):a.get("Symbol")["$==="](k)?this.$class_for_name(m.$to_s()):m):e=this.$raise(a.get("ArgumentError").$new("Extension group to register not specified")));m=e;k=!1!==(d=h.$pop())&&d!==c?d:this.$generate_name();((d=h["$empty?"]())===
c||d.$$is_boolean&&1!=d)&&this.$raise(a.get("ArgumentError").$new("Wrong number of arguments ("+f+" for 1..2)"));return this.$groups()["$[]="](k,m)});a.defn(e,"$unregister_all",function(){return this.groups=w([],{})});a.defn(e,"$resolve_class",function(b){var d;return(d=b["$is_a?"](a.get("Class")))===c||d.$$is_boolean&&1!=d?this.$class_for_name(b.$to_s()):b});return(a.defn(e,"$class_for_name",function(b){var d,e,f,k=c,k=a.get("Object");(d=(e=b.$split("::")).$each,d.$$p=(f=function(a){var d=f.$$s||
this,e;null==a&&(a=c);return(e=a["$empty?"]())===c||e.$$is_boolean&&1!=e?(e=k["$const_defined?"](a))===c||e.$$is_boolean&&1!=e?d.$raise("Could not resolve class for name: "+b):k=k.$const_get(a):c},f.$$s=this,f),d).call(e);return k}),c)&&"class_for_name"})(a.get_singleton_class(B))})(r(K,"Asciidoctor").$$scope.base)}(a.base)})(C);(function(a){a.dynamic_require_severity="ignore";return a.nil})(C)};
