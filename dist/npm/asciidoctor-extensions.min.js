module.exports=function(a){var b=a||require("opal-npm-wrapper").Opal;!function(a){var b=a.top,c=a.nil,d=a.breaker,e=a.slice,f=a.module,g=a.klass,h=a.hash2,i=a.range,j=a.hash;return function(b){{var k=f(b,"Asciidoctor");k._proto,k._scope}!function(b){var k=f(b,"Extensions"),l=(k._proto,k._scope);!function(b,d){function f(){}var i,j,k,l=f=g(b,d,"Processor",f),m=l._proto,n=l._scope;return m.config=c,function(a){a._scope,a._proto;return a._proto.$config=function(){var a,b=this;return null==b.config&&(b.config=c),(a=b.config)!==!1&&a!==c?a:b.config=h([],{})},a._proto.$option=function(a,b){var c=this;return c.$config()["$[]="](a,b)},a._proto.$use_dsl=function(){var a,b=this;return(a=b.$name()["$nil_or_empty?"]())===c||a._isBoolean&&1!=a?(a=b.$constants().$grep("DSL"))===c||a._isBoolean&&1!=a?c:b.$extend(b.$const_get("DSL")):(a=b.$constants().$grep("DSL"))===c||a._isBoolean&&1!=a?c:b.$include(b.$const_get("DSL"))},a._proto.$extend_dsl=a._proto.$use_dsl,a._proto.$include_dsl=a._proto.$use_dsl}(l.$singleton_class()),l.$attr_reader("config"),m.$initialize=function(a){var b=this;return null==a&&(a=h([],{})),b.config=b.$class().$config().$merge(a)},m.$update_config=function(a){var b=this;return b.config.$update(a)},m.$process=function(b){var c,d=this;return b=e.call(arguments,0),d.$raise(null==(c=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):c)},m.$create_block=function(a,b,c,d,e){return null==e&&(e=h([],{})),n.Block.$new(a,b,h(["source","attributes"],{source:c,attributes:d}).$merge(e))},m.$create_image_block=function(a,b,d){var e=this;return null==d&&(d=h([],{})),e.$create_block(a,"image",c,b,d)},m.$create_inline=function(a,b,c,d){return null==d&&(d=h([],{})),n.Inline.$new(a,b,c,d)},m.$parse_content=function(a,b,d){var e,f,g=c,i=c;for(null==d&&(d=h([],{})),g=function(){return(e=b["$is_a?"](n.Reader))===c||e._isBoolean&&1!=e?n.Reader.$new(b):g}();(f=g["$has_more_lines?"]())!==c&&(!f._isBoolean||1==f);)i=n.Parser.$next_block(g,a,d),i!==!1&&i!==c&&a["$<<"](i);return c},(i=(j=[["create_paragraph","create_block","paragraph"],["create_open_block","create_block","open"],["create_example_block","create_block","example"],["create_pass_block","create_block","pass"],["create_listing_block","create_block","listing"],["create_literal_block","create_block","literal"],["create_anchor","create_inline","anchor"]]).$each,i._p=(k=function(a,b,d){var f,g,h,i=k._s||this;return null==a&&(a=c),null==b&&(b=c),null==d&&(d=c),(f=(g=i).$define_method,f._p=(h=function(a){var c,f=h._s||this;return a=e.call(arguments,0),(c=f).$send.apply(c,[b].concat(a.$dup().$insert(1,d)))},h._s=i,h),f).call(g,a)},k._s=l,k),i).call(j)}(k,null),function(b){{var d,g=f(b,"ProcessorDsl"),h=g._proto;g._scope}h.$option=function(a,b){var c=this;return c.$config()["$[]="](a,b)},h.$process=d=function(b){var f,g,h=this,i=d._p,j=i||c;return null==h.process_block&&(h.process_block=c),b=e.call(arguments,0),d._p=null,j!==c?h.process_block=j:(f=h.process_block)===c||f._isBoolean&&1!=f?h.$raise(null==(g=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):g):(f=h.process_block).$call.apply(f,[].concat(b))},h["$process_block_given?"]=function(){var a,b=this;return a=b.process_block,null!=a&&a!==c?"instance-variable":c},a.donate(g,["$option","$process","$process_block_given?"])}(k),function(b,d){function e(){}{var f=e=g(b,d,"Preprocessor",e),h=f._proto;f._scope}return h.$process=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},c&&"process"}(k,l.Processor),a.casgn(l.Preprocessor,"DSL",l.ProcessorDsl),function(b,d){function e(){}{var f=e=g(b,d,"Treeprocessor",e),h=f._proto;f._scope}return h.$process=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},c&&"process"}(k,l.Processor),a.casgn(l.Treeprocessor,"DSL",l.ProcessorDsl),function(b,d){function e(){}{var f=e=g(b,d,"Postprocessor",e),h=f._proto;f._scope}return h.$process=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},c&&"process"}(k,l.Processor),a.casgn(l.Postprocessor,"DSL",l.ProcessorDsl),function(b,d){function e(){}{var f=e=g(b,d,"IncludeProcessor",e),h=f._proto;f._scope}return h.$process=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},h["$handles?"]=function(){return!0},c&&"handles?"}(k,l.Processor),a.casgn(l.IncludeProcessor,"DSL",l.ProcessorDsl),function(b,d){function e(){}{var f,i=e=g(b,d,"BlockProcessor",e),j=i._proto;i._scope}return j.config=c,i.$attr_accessor("name"),j.$initialize=f=function(b,d){var e,g,i,j=this,k=(f._p,c);return null==b&&(b=c),null==d&&(d=h([],{})),f._p=null,a.find_super_dispatcher(j,"initialize",f,null).apply(j,[d]),j.name=(e=b)!==!1&&e!==c?e:j.config["$[]"]("name"),k=j.config["$[]"]("contexts"),(null==(e=a.Object._scope.NilClass)?a.cm("NilClass"):e)["$==="](k)?(e="contexts",g=j.config,(i=g["$[]"](e))!==!1&&i!==c?i:g["$[]="](e,["open","paragraph"].$to_set())):(null==(e=a.Object._scope.Symbol)?a.cm("Symbol"):e)["$==="](k)?j.config["$[]="]("contexts",[j.config["$[]"]("contexts")].$to_set()):j.config["$[]="]("contexts",j.config["$[]"]("contexts").$to_set()),e="content_model",g=j.config,(i=g["$[]"](e))!==!1&&i!==c?i:g["$[]="](e,"compound")},j.$process=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},c&&"process"}(k,l.Processor),function(b){var d=f(b,"BlockProcessorDsl"),g=d._proto,h=d._scope;d.$include(h.ProcessorDsl),g.$named=function(a){var b,d=this;return(b=d["$is_a?"](h.Processor))===c||b._isBoolean&&1!=b?d.$option("name",a):d.name=a},a.defn(d,"$match_name",g.$named),a.defn(d,"$bind_to",g.$named),g.$contexts=function(a){var b=this;return a=e.call(arguments,0),b.$option("contexts",a.$flatten())},a.defn(d,"$on_contexts",g.$contexts),a.defn(d,"$on_context",g.$contexts),g.$content_model=function(a){var b=this;return b.$option("content_model",a)},a.defn(d,"$parse_content_as",g.$content_model),g.$pos_attrs=function(a){var b=this;return a=e.call(arguments,0),b.$option("pos_attrs",a.$flatten())},a.defn(d,"$map_attributes",g.$pos_attrs),a.defn(d,"$name_positional_attributes",g.$pos_attrs),g.$default_attrs=function(a){var b=this;return b.$option("default_attrs",a)},a.defn(d,"$seed_attributes_with",g.$default_attrs),a.donate(d,["$named","$match_name","$bind_to","$contexts","$on_contexts","$on_context","$content_model","$parse_content_as","$pos_attrs","$map_attributes","$name_positional_attributes","$default_attrs","$seed_attributes_with"])}(k),a.casgn(l.BlockProcessor,"DSL",l.BlockProcessorDsl),function(b,d){function e(){}{var f,i=e=g(b,d,"MacroProcessor",e),j=i._proto;i._scope}return j.config=c,i.$attr_accessor("name"),j.$initialize=f=function(b,d){{var e,g,i,j=this;f._p}return null==b&&(b=c),null==d&&(d=h([],{})),f._p=null,a.find_super_dispatcher(j,"initialize",f,null).apply(j,[d]),j.name=(e=b)!==!1&&e!==c?e:j.config["$[]"]("name"),e="content_model",g=j.config,(i=g["$[]"](e))!==!1&&i!==c?i:g["$[]="](e,"attributes")},j.$process=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},c&&"process"}(k,l.Processor),function(b){var d=f(b,"MacroProcessorDsl"),g=d._proto,h=d._scope;d.$include(h.ProcessorDsl),g.$named=function(a){var b,d=this;return(b=d["$is_a?"](h.Processor))===c||b._isBoolean&&1!=b?d.$option("name",a):d.name=a},a.defn(d,"$match_name",g.$named),a.defn(d,"$bind_to",g.$named),g.$content_model=function(a){var b=this;return b.$option("content_model",a)},a.defn(d,"$parse_content_as",g.$content_model),g.$pos_attrs=function(a){var b=this;return a=e.call(arguments,0),b.$option("pos_attrs",a.$flatten())},a.defn(d,"$map_attributes",g.$pos_attrs),a.defn(d,"$name_positional_attributes",g.$pos_attrs),g.$default_attrs=function(a){var b=this;return b.$option("default_attrs",a)},a.defn(d,"$seed_attributes_with",g.$default_attrs),a.donate(d,["$named","$match_name","$bind_to","$content_model","$parse_content_as","$pos_attrs","$map_attributes","$name_positional_attributes","$default_attrs","$seed_attributes_with"])}(k),function(a,b){function d(){}{var e=d=g(a,b,"BlockMacroProcessor",d);e._proto,e._scope}return c}(k,l.MacroProcessor),a.casgn(l.BlockMacroProcessor,"DSL",l.MacroProcessorDsl),function(b,d){function f(){}{var i,j=f=g(b,d,"InlineMacroProcessor",f),k=j._proto;j._scope}return k.config=k.name=c,k.$initialize=i=function(b,d){var f,g,j,k=e.call(arguments,0),l=this,m=i._p;return null==d&&(d=h([],{})),i._p=null,a.find_super_dispatcher(l,"initialize",i,m).apply(l,k),f="regexp",g=l.config,(j=g["$[]"](f))!==!1&&j!==c?j:g["$[]="](f,l.$resolve_regexp(l.name,l.config["$[]"]("format")))},k.$resolve_regexp=function(a,b){return new RegExp(b["$=="]("short")?"\\\\?"+a+":\\[((?:\\\\\\]|[^\\]])*?)\\]":"\\\\?"+a+":(\\S+?)\\[((?:\\\\\\]|[^\\]])*?)\\]")},c&&"resolve_regexp"}(k,l.MacroProcessor),function(b){var c=f(b,"InlineMacroProcessorDsl"),d=c._proto,e=c._scope;c.$include(e.MacroProcessorDsl),d.$using_format=function(a){var b=this;return b.$option("format",a)},d.$match=function(a){var b=this;return b.$option("regexp",a)},a.donate(c,["$using_format","$match"])}(k),a.casgn(l.InlineMacroProcessor,"DSL",l.InlineMacroProcessorDsl),function(a,b){function d(){}{var e=d=g(a,b,"Extension",d),f=e._proto;e._scope}return e.$attr("kind"),e.$attr("config"),e.$attr("instance"),f.$initialize=function(a,b,c){var d=this;return d.kind=a,d.instance=b,d.config=c},c&&"initialize"}(k,null),function(b,d){function e(){}{var f,h=e=g(b,d,"ProcessorExtension",e),i=h._proto;h._scope}return h.$attr("process_method"),i.$initialize=f=function(b,d,e){{var g,h=this;f._p}return null==e&&(e=c),f._p=null,a.find_super_dispatcher(h,"initialize",f,null).apply(h,[b,d,d.$config()]),h.process_method=(g=e)!==!1&&g!==c?g:d.$method("process")},c&&"initialize"}(k,l.Extension),function(b,d){function e(){}{var f=e=g(b,d,"Group",e),h=f._proto;f._scope}return function(a){{var b=a._scope;a._proto}return a._proto.$register=function(a){var d=this;return null==a&&(a=c),b.Extensions.$register(a,d)},c&&"register"}(f.$singleton_class()),h.$activate=function(){var b,c=this;return c.$raise(null==(b=a.Object._scope.NotImplementedError)?a.cm("NotImplementedError"):b)},c&&"activate"}(k,null),function(b,f){function j(){}var k,l,m,n,o,p,q,r,s,t=j=g(b,f,"Registry",j),u=t._proto,v=t._scope;return u.groups=u.preprocessor_extensions=u.treeprocessor_extensions=u.postprocessor_extensions=u.include_processor_extensions=u.block_extensions=u.block_macro_extensions=u.inline_macro_extensions=c,t.$attr_reader("document"),t.$attr_reader("groups"),u.$initialize=function(a){var b=this;return null==a&&(a=h([],{})),b.groups=a,b.preprocessor_extensions=b.treeprocessor_extensions=b.postprocessor_extensions=b.include_processor_extensions=c,b.block_extensions=b.block_macro_extensions=b.inline_macro_extensions=c,b.document=c},u.$activate=function(b){var d,e,f,g=this;return g.document=b,(d=(e=v.Extensions.$groups().$values()["$+"](g.groups.$values())).$each,d._p=(f=function(b){var d,e,g=f._s||this,h=c;return null==b&&(b=c),function(){return h=b,(null==(d=a.Object._scope.Proc)?a.cm("Proc"):d)["$==="](h)?function(){return h=b.$arity(),0["$==="](h)||(-1)["$==="](h)?(d=(e=g).$instance_exec,d._p=b.$to_proc(),d).call(e):1["$==="](h)?b.$call(g):c}():(null==(d=a.Object._scope.Class)?a.cm("Class"):d)["$==="](h)?b.$new().$activate(g):b.$activate(g)}()},f._s=g,f),d).call(e),g},u.$preprocessor=k=function(a){var b,d,f=this,g=k._p,h=g||c;return a=e.call(arguments,0),k._p=null,(b=(d=f).$add_document_processor,b._p=h.$to_proc(),b).call(d,"preprocessor",a)},u["$preprocessors?"]=function(){var a=this;return a.preprocessor_extensions["$!"]()["$!"]()},u.$preprocessors=function(){var a=this;return a.preprocessor_extensions},u.$treeprocessor=l=function(a){var b,d,f=this,g=l._p,h=g||c;return a=e.call(arguments,0),l._p=null,(b=(d=f).$add_document_processor,b._p=h.$to_proc(),b).call(d,"treeprocessor",a)},u["$treeprocessors?"]=function(){var a=this;return a.treeprocessor_extensions["$!"]()["$!"]()},u.$treeprocessors=function(){var a=this;return a.treeprocessor_extensions},u.$postprocessor=m=function(a){var b,d,f=this,g=m._p,h=g||c;return a=e.call(arguments,0),m._p=null,(b=(d=f).$add_document_processor,b._p=h.$to_proc(),b).call(d,"postprocessor",a)},u["$postprocessors?"]=function(){var a=this;return a.postprocessor_extensions["$!"]()["$!"]()},u.$postprocessors=function(){var a=this;return a.postprocessor_extensions},u.$include_processor=n=function(a){var b,d,f=this,g=n._p,h=g||c;return a=e.call(arguments,0),n._p=null,(b=(d=f).$add_document_processor,b._p=h.$to_proc(),b).call(d,"include_processor",a)},u["$include_processors?"]=function(){var a=this;return a.include_processor_extensions["$!"]()["$!"]()},u.$include_processors=function(){var a=this;return a.include_processor_extensions},u.$block=o=function(a){var b,d,f=this,g=o._p,h=g||c;return a=e.call(arguments,0),o._p=null,(b=(d=f).$add_syntax_processor,b._p=h.$to_proc(),b).call(d,"block",a)},u["$blocks?"]=function(){var a=this;return a.block_extensions["$!"]()["$!"]()},u["$registered_for_block?"]=function(a,b){var d,e=this,f=c;return(d=f=e.block_extensions["$[]"](a.$to_sym()))===c||d._isBoolean&&1!=d?!1:(d=f.$config()["$[]"]("contexts")["$include?"](b))===c||d._isBoolean&&1!=d?!1:f},u.$find_block_extension=function(a){var b=this;return b.block_extensions["$[]"](a.$to_sym())},u.$block_macro=p=function(a){var b,d,f=this,g=p._p,h=g||c;return a=e.call(arguments,0),p._p=null,(b=(d=f).$add_syntax_processor,b._p=h.$to_proc(),b).call(d,"block_macro",a)},u["$block_macros?"]=function(){var a=this;return a.block_macro_extensions["$!"]()["$!"]()},u["$registered_for_block_macro?"]=function(a){var b,d=this,e=c;return(b=e=d.block_macro_extensions["$[]"](a.$to_sym()))===c||b._isBoolean&&1!=b?!1:e},u.$find_block_macro_extension=function(a){var b=this;return b.block_macro_extensions["$[]"](a.$to_sym())},u.$inline_macro=q=function(a){var b,d,f=this,g=q._p,h=g||c;return a=e.call(arguments,0),q._p=null,(b=(d=f).$add_syntax_processor,b._p=h.$to_proc(),b).call(d,"inline_macro",a)},u["$inline_macros?"]=function(){var a=this;return a.inline_macro_extensions["$!"]()["$!"]()},u["$registered_for_inline_macro?"]=function(a){var b,d=this,e=c;return(b=e=d.inline_macro_extensions["$[]"](a.$to_sym()))===c||b._isBoolean&&1!=b?!1:e},u.$find_inline_macro_extension=function(a){var b=this;return b.inline_macro_extensions["$[]"](a.$to_sym())},u.$inline_macros=function(){var a=this;return a.inline_macro_extensions.$values()},t.$private(),u.$add_document_processor=r=function(b,d){var e,f,g,h,j,k,l,m=this,n=r._p,o=n||c,p=c,q=c,s=c,t=c,u=c,w=c,x=c,y=c,z=c;return r._p=null,p=b.$to_s().$tr("_"," "),q=(e=(f=p.$split(" ")).$map,e._p=(g=function(a){g._s||this;return null==a&&(a=c),""+a.$chr().$upcase()+a["$[]"](i(1,-1,!1))},g._s=m,g),e).call(f).$join().$to_sym(),s=v.Extensions.$const_get(q),t=function(){return(e=null==a.Object._scope.AsciidoctorJ?c:"constant")===c||e._isBoolean&&1!=e?c:(null==(e=a.Object._scope.AsciidoctorJ)?a.cm("AsciidoctorJ"):e)._scope.Extensions.$const_get(q)}(),u=(e=m.$instance_variable_get(("@"+b+"_extensions").$to_sym()))!==!1&&e!==c?e:m.$instance_variable_set(("@"+b+"_extensions").$to_sym(),[]),w=function(){return o!==c?(x=m.$resolve_args(d,1),y=s.$new(x),function(a){a._scope,a._proto;return a.$include_dsl()}(y.$singleton_class()),(e=(h=y).$instance_exec,e._p=o.$to_proc(),e).call(h),y.$freeze(),((e=y["$process_block_given?"]())===c||e._isBoolean&&1!=e)&&m.$raise((null==(e=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):e).$new("No block specified to process "+p+" extension at "+o.$source_location())),v.ProcessorExtension.$new(b,y)):(e=a.to_ary(m.$resolve_args(d,2)),y=null==e[0]?c:e[0],x=null==e[1]?c:e[1],(e=(j=y["$is_a?"](null==(k=a.Object._scope.Class)?a.cm("Class"):k))!==!1&&j!==c?j:(k=y["$is_a?"](null==(l=a.Object._scope.String)?a.cm("String"):l),k!==!1&&k!==c?y=v.Extensions.$class_for_name(y):k))===c||e._isBoolean&&1!=e?(e=(j=y["$is_a?"](s))!==!1&&j!==c?j:(k=t!==!1&&t!==c)?y["$is_a?"](t):k)===c||e._isBoolean&&1!=e?m.$raise((null==(e=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):e).$new("Invalid arguments specified for registering "+p+" extension: "+d)):(y.$update_config(x),y.$freeze(),v.ProcessorExtension.$new(b,y)):(((e=(j=y["$<"](s))!==!1&&j!==c?j:(k=t!==!1&&t!==c)?y["$<"](t):k)===c||e._isBoolean&&1!=e)&&m.$raise((null==(e=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):e).$new("Invalid type for "+p+" extension: "+y)),z=y.$new(x),z.$freeze(),v.ProcessorExtension.$new(b,z)))}(),w.$config()["$[]"]("position")["$=="](">>")?u.$unshift(w):u["$<<"](w)},u.$add_syntax_processor=s=function(b,e){var f,g,j,k,l,m,n,o=this,p=s._p,q=p||c,r=c,t=c,u=c,w=c,x=c,y=c,z=c,A=c,B=c,C=c;if(s._p=null,r=b.$to_s().$tr("_"," "),t=(f=(g=r.$split(" ")).$map,f._p=(j=function(a){j._s||this;return null==a&&(a=c),""+a.$chr().$upcase()+a["$[]"](i(1,-1,!1))},j._s=o,j),f).call(g).$join(),u=(""+t+"Processor").$to_sym(),w=v.Extensions.$const_get(u),x=function(){return(f=null==a.Object._scope.AsciidoctorJ?c:"constant")===c||f._isBoolean&&1!=f?c:(null==(f=a.Object._scope.AsciidoctorJ)?a.cm("AsciidoctorJ"):f)._scope.Extensions.$const_get(u)}(),y=(f=o.$instance_variable_get(("@"+b+"_extensions").$to_sym()))!==!1&&f!==c?f:o.$instance_variable_set(("@"+b+"_extensions").$to_sym(),h([],{})),q!==c){if(f=a.to_ary(o.$resolve_args(e,2)),z=null==f[0]?c:f[0],A=null==f[1]?c:f[1],B=w.$new(o.$as_symbol(z),A),function(a){a._scope,a._proto;return a.$include_dsl()}(B.$singleton_class()),q.$arity()["$=="](1)){if(a.$yield1(q,B)===d)return d.$v}else(f=(k=B).$instance_exec,f._p=q.$to_proc(),f).call(k);return((f=z=o.$as_symbol(B.$name()))===c||f._isBoolean&&1!=f)&&o.$raise((null==(f=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):f).$new("No name specified for "+r+" extension at "+q.$source_location())),((f=B["$process_block_given?"]())===c||f._isBoolean&&1!=f)&&o.$raise((null==(f=a.Object._scope.NoMethodError)?a.cm("NoMethodError"):f).$new("No block specified to process "+r+" extension at "+q.$source_location())),B.$freeze(),y["$[]="](z,v.ProcessorExtension.$new(b,B))}return f=a.to_ary(o.$resolve_args(e,3)),B=null==f[0]?c:f[0],z=null==f[1]?c:f[1],A=null==f[2]?c:f[2],(f=(l=B["$is_a?"](null==(m=a.Object._scope.Class)?a.cm("Class"):m))!==!1&&l!==c?l:(m=B["$is_a?"](null==(n=a.Object._scope.String)?a.cm("String"):n),m!==!1&&m!==c?B=v.Extensions.$class_for_name(B):m))===c||f._isBoolean&&1!=f?(f=(l=B["$is_a?"](w))!==!1&&l!==c?l:(m=x!==!1&&x!==c)?B["$is_a?"](x):m)===c||f._isBoolean&&1!=f?o.$raise((null==(f=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):f).$new("Invalid arguments specified for registering "+r+" extension: "+e)):(B.$update_config(A),((f=z=function(){return z!==!1&&z!==c?B["$name="](o.$as_symbol(z)):o.$as_symbol(B.$name())}())===c||f._isBoolean&&1!=f)&&o.$raise((null==(f=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):f).$new("No name specified for "+r+" extension: "+B)),B.$freeze(),y["$[]="](z,v.ProcessorExtension.$new(b,B))):(((f=(l=B["$<"](w))!==!1&&l!==c?l:(m=x!==!1&&x!==c)?B["$<"](x):m)===c||f._isBoolean&&1!=f)&&o.$raise((null==(f=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):f).$new("Class specified for "+r+" extension does not inherit from "+w+": "+B)),C=B.$new(o.$as_symbol(z),A),((f=z=o.$as_symbol(C.$name()))===c||f._isBoolean&&1!=f)&&o.$raise((null==(f=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):f).$new("No name specified for "+r+" extension: "+B)),B.$freeze(),y["$[]="](z,v.ProcessorExtension.$new(b,C)))},u.$resolve_args=function(b,d){var e,f,g=c,i=c,j=c;return g=function(){return(e=b["$[]"](-1)["$is_a?"](null==(f=a.Object._scope.Hash)?a.cm("Hash"):f))===c||e._isBoolean&&1!=e?h([],{}):b.$pop()}(),d["$=="](1)?g:(i=b.$size(),(j=d["$-"](1)["$-"](i))["$>"](0)?b.$fill(c,i,j):j["$<"](0)&&b.$pop(j["$-@"]()),b["$<<"](g),b)},u.$as_symbol=function(b){var d,e;return b!==!1&&b!==c?function(){return(d=b["$is_a?"](null==(e=a.Object._scope.Symbol)?a.cm("Symbol"):e))===c||d._isBoolean&&1!=d?b.$to_sym():b}():c},c&&"as_symbol"}(k,null),function(b){{var d=b._scope;b._proto}return b._proto.$generate_name=function(){var a=this;return"extgrp"+a.$next_auto_id()},b._proto.$next_auto_id=function(){var a,b=this;return null==b.auto_id&&(b.auto_id=c),(a=b.auto_id)!==!1&&a!==c?a:b.auto_id=-1,b.auto_id=b.auto_id["$+"](1)},b._proto.$groups=function(){var a,b=this;return null==b.groups&&(b.groups=c),(a=b.groups)!==!1&&a!==c?a:b.groups=h([],{})},b._proto.$build_registry=TMP_20=function(a){var b,e=this,f=TMP_20._p,g=f||c;return null==a&&(a=c),TMP_20._p=null,g!==c?((b=a)!==!1&&b!==c?b:a=e.$generate_name(),d.Registry.$new(j(a,g))):d.Registry.$new()},b._proto.$register=TMP_21=function(b){var d,f=this,g=TMP_21._p,h=g||c,i=c,j=c,k=c,l=c,m=c;return b=e.call(arguments,0),TMP_21._p=null,i=b.$length(),j=function(){return h!==c?h:(d=(k=b.$pop())["$!"]())===c||d._isBoolean&&1!=d?function(){return l=k,(null==(d=a.Object._scope.Class)?a.cm("Class"):d)["$==="](l)?k:(null==(d=a.Object._scope.String)?a.cm("String"):d)["$==="](l)?f.$class_for_name(k):(null==(d=a.Object._scope.Symbol)?a.cm("Symbol"):d)["$==="](l)?f.$class_for_name(k.$to_s()):k}():f.$raise((null==(d=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):d).$new("Extension group to register not specified"))}(),m=(d=b.$pop())!==!1&&d!==c?d:f.$generate_name(),((d=b["$empty?"]())===c||d._isBoolean&&1!=d)&&f.$raise((null==(d=a.Object._scope.ArgumentError)?a.cm("ArgumentError"):d).$new("Wrong number of arguments ("+i+" for 1..2)")),f.$groups()["$[]="](m,j)},b._proto.$unregister_all=function(){var a=this;return a.groups=h([],{})},b._proto.$resolve_class=function(b){var d,e,f=this;return(d=b["$is_a?"](null==(e=a.Object._scope.Class)?a.cm("Class"):e))===c||d._isBoolean&&1!=d?f.$class_for_name(b.$to_s()):b},b._proto.$class_for_name=function(b){var d,e,f,g=this,h=c;return h=null==(d=a.Object._scope.Object)?a.cm("Object"):d,(d=(e=b.$split("::")).$each,d._p=(f=function(a){var d,e=f._s||this;return null==a&&(a=c),(d=a["$empty?"]())===c||d._isBoolean&&1!=d?(d=h["$const_defined?"](a))===c||d._isBoolean&&1!=d?e.$raise("Could not resolve class for name: "+b):h=h.$const_get(a):c},f._s=g,f),d).call(e),h},c&&"class_for_name"}(k.$singleton_class())}(k)}(b)}(b)};