= Asciidoctor.js: AsciiDoc in JavaScript powered by Asciidoctor
Dan Allen <https://github.com/mojavelinux[@mojavelinux]>; Guillaume Grossetie <https://github.com/mogztter[@mogztter]>; Anthonny Quérouil <https://github.com/anthonny[@anthonny]>
:idprefix:
:idseparator: -
:uri-nodejs: http://nodejs.org
:uri-opal: http://opalrb.org
:uri-repo: https://github.com/asciidoctor/asciidoctor.js
:uri-freesoftware: https://www.gnu.org/philosophy/free-sw.html
:uri-rel-file-base: link:
:uri-contribute: {uri-rel-file-base}CONTRIBUTING.adoc
:license: {uri-repo}/blob/master/LICENSE
:experimental:
:endash:

ifdef::env-github[]
image:http://img.shields.io/travis/asciidoctor/asciidoctor.js.svg[Build Status, link=https://travis-ci.org/asciidoctor/asciidoctor.js]
image:http://img.shields.io/npm/v/asciidoctor.js.svg[npm version, link=https://www.npmjs.org/package/asciidoctor.js]
endif::[]

This project uses {uri-opal}[Opal] to transcompile http://asciidoctor.org[Asciidoctor]—a modern implementation of AsciiDoc—from Ruby to JavaScript to produce [path]_asciidoctor.js_, bringing http://asciidoc.org[AsciiDoc] to the JavaScript world!

== Introduction

You can use Asciidoctor.js either for back-end development using {uri-nodejs}[Node.js] or front-end development using a browser.

IMPORTANT: To be successful with Asciidoctor.js, it's important to understand how to work with Ruby objects in the JavaScript environment.
We recommend that you browse the http://opalrb.org/docs/using_ruby_from_javascript[Opal documentation] to learn how method names are mapped and what data types it expects.

== Front-end development

[source, bash]
.Installing Asciidoctor.js with Bower
----
$ bower install asciidoctor.js --save
----

Once the package installed, you can add the following `script` tag to your HTML page:

[source,html]
----
<script src="bower_components/asciidoctor.js/dist/asciidoctor-all.min.js"></script>
<!-- If you need docbook backends -->
<script src="bower_components/asciidoctor.js/dist/asciidoctor-docbook.min.js"></script>
----

If you don't want to use *extensions*, you can load files separately :

[source,html]
----
<script src="bower_components/opal/opal/current/opal.min.js"></script>
<script src="bower_components/asciidoctor.js/dist/asciidoctor-core.min.js"></script>
<!-- If you need docbook backends -->
<script src="bower_components/asciidoctor.js/dist/asciidoctor-docbook.min.js"></script>
----

Here is a simple example that converts AsciiDoc to HTML5 using the `doctype: 'inline'` option and `showtitle` attribute:

.sample.js
[source,javascript]
----
var content = "http://asciidoctor.org[*Asciidoctor*] " +
    "running on http://opalrb.org[_Opal_] " +
    "brings AsciiDoc to the browser!";
var options = Opal.hash2(
    ['doctype', 'attributes'], 
    {doctype: 'inline', attributes: ['showtitle']});
var html = Opal.Asciidoctor.$convert(asciidoc, options); // <1>
console.log(html); // <2>
----
<1> Convert AsciiDoc content to HTML5 using Asciidoctor.js
<2> Print the HTML5 output to the console

== Back-end development

[source, bash]
.Installing Asciidoctor.js with npm
----
$ npm install asciidoctor.js --save
----

Once the package is installed, the first thing to do is to load the `asciidoctor.js` module using `require`, then you're ready to start using the API:

.sample.js
[source,javascript]
----
var asciidoctor = require('asciidoctor.js')(); // <1>
var opal = asciidoctor.Opal; // <2>

var processor = null;
var useExtensions = true;

if (useExtensions) {
  processor = asciidoctor.Asciidoctor(true); // <3>
}
else {
  processor = asciidoctor.Asciidoctor(); // <4>
}

var content = "http://asciidoctor.org[*Asciidoctor*] " +
    "running on http://opalrb.org[_Opal_] " +
    "brings AsciiDoc to Node.js!";
var options = opal.hash2(
    ['doctype', 'attributes'],
    {doctype: 'inline', attributes: ['showtitle']});
var html = processor.$convert(content, options); // <5>
console.log(html); // <6>
----
<1> Load the Asciidoctor.js library
<2> Retrieve and alias the top-level Opal namespace
<3> Instantiate Asciidoctor with extensions enabled
<4> Instantiate Asciidoctor without extensions
<5> Convert AsciiDoc content to HTML5 using Asciidoctor.js
<6> Print the HTML5 output to the console

Save the file as `sample.js` and run it using the `node` command:

 $ node sample.js

You should see the following output in your terminal:

[.output]
....
<a href="http://asciidoctor.org"><strong>Asciidoctor</strong></a> running on <a href="http://opalrb.org"><em>Opal</em></a> brings AsciiDoc to Node.js!</p>
....
== Contributing

In the spirit of {uri-freesoftware}[free software], _everyone_ is encouraged to help improve this project.
If you discover errors or omissions in the source code, documentation, or website content, please don't hesitate to submit an issue or open a pull request with a fix.
New contributors are always welcome!

The {uri-contribute}[Contributing] guide provides information on how to contribute.

== Copyright

Copyright (C) 2014 Dan Allen, Guillaume Grossetie, Anthonny Quérouil and the Asciidoctor Project.
Free use of this software is granted under the terms of the MIT License.

See the {license}[LICENSE] file for details.
